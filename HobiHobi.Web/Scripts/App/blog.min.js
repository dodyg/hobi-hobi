function countChar(n){var t=n.value.length;t>=280?n.value=n.value.substring(0,280):t>=140?$("#post_content_count").text("* "+(279-t)):$("#post_content_count").text(280-t+"")}var MessageType,UserMessage,blogModule,notification;(function(n){n._map=[],n._map[0]="ERROR",n.ERROR=0,n._map[1]="INFO",n.INFO=1,n._map[2]="SUCCESS",n.SUCCESS=2,n._map[3]="WARNING",n.WARNING=3})(MessageType||(MessageType={})),UserMessage=function(){function n(n,t){this.Message=n,this.Type=t}return n}(),blogModule=angular.module("blogModule",[]),blogModule.run(function(n){n.$on("data-posts",function(t,i){n.$broadcast("list-posts",i)}),n.$on("data-single-post",function(t,i){n.$broadcast("list-append-post",i)})}),notification=["$window",function(){return function(n){var t=angular.element("#user-message");switch(n.Type){case MessageType.ERROR:t.removeClass().addClass("alert alert-error").text(n.Message);break;case MessageType.INFO:t.removeClass().addClass("alert alert-info").text(n.Message);break;case MessageType.SUCCESS:t.removeClass().addClass("alert alert-success").text(n.Message);break;case MessageType.WARNING:t.removeClass().addClass("alert").text(n.Message)}}}],blogModule.factory("notification",notification),blogModule.directive("showonhoverparent",function(){return{link:function(n,t){t.parent().bind("mouseenter",function(){t.show()}),t.parent().bind("mouseleave",function(){t.hide()})}}}),blogModule.directive("alert",function(){return{restrict:"A",link:function(n,t){n.$watch("alertType",function(n){angular.isDefined(n)&&t.addClass("alert "+n)},!0)}}});var AuthenticationController=function(){function n(n,t,i){n.ready(function(){i.get("/manage/identity/isauthenticated").success(function(n){t.is_authenticated=n.Data,n.Data?(t.alertType="alert-info",t.loggedIn=!0,t.message="you are logged in"):(t.alertType="alert-info",t.loggedIn=!1)})}),t.showLoginPanel=function(){angular.element("#login_to_system").modal()},t.tryLogout=function(){var n=JSON.stringify({});i.post("/manage/identity/logout",n).success(function(n){n.StatusCode==200&&(t.loggedIn=!1)})}}return n}(),LoginController=function(){function n(n,t,i){t.tryLogin=function(n){if(n==undefined){alert("Please enter the values");return}if(!angular.isDefined(n.username)){alert("username is required");return}if(!angular.isDefined(n.password)){alert("password is required");return}var r={Email:n.username,Password:n.password},u=JSON.stringify(r);i.post("/manage/identity/authenticate",u).success(function(n){if(n.StatusCode==200)t.$parent.loggedIn=!0,angular.element("#login_to_system").modal("hide");else{var i=JSON.parse(n.ErrorDetails);angular.forEach(i.Properties,function(n){alert(n.Errors[0])})}})}}return n}(),PostController=function(){function n(n,t,i,r){n.master={},n.newPost=function(t){var e=$("#feed_tabs li.active a"),o=e.data("id"),u,f;if(t===undefined){r(new UserMessage("Content is required",MessageType.ERROR));return}u={feedId:o,content:t.content,link:null},angular.isDefined(t.link)&&(u.link=t.link),n.post=angular.copy(n.master),f=JSON.stringify(u),i.post("/manage/blog/createpost",f).success(function(t){r(new UserMessage("Your post is successfully added",MessageType.SUCCESS)),n.$emit("data-single-post",[t.Data])})}}return n}(),PostListController=function(){function n(n,t,i,r){n.posts=[],n.$on("list-posts",function(t,i){n.posts=i.posts}),n.showLink=function(n){return n!=null?'<a href=" '+n+'"><b class="icon-zoom-in"><\/b><\/a>':""},n.$on("list-append-post",function(t,i){n.posts=i.concat(n.posts)}),n.deletePost=function(n){var t=angular.element(n.srcElement);t.removeClass("icon-remove"),t.children().show()},n.confirmDeletion=function(n,t,u){var f=angular.element(n.srcElement),e,o;u?(e={feedId:t.FeedId,postId:t.Id},o=JSON.stringify(e),i.post("/manage/blog/deletepost",o).success(function(n){n.StatusCode!==200?r(new UserMessage(n.ErrorDetails,MessageType.ERROR)):f.parent().parent().remove()})):f.parent().addClass("icon-remove").children().hide()}}return n}(),TabsController=function(){function n(n,t,i,r,u){function f(t){u.get("/manage/blog/getposts/?feedId="+t).success(function(t){n.$emit("data-posts",{posts:t.Data})})}i.ready(function(){var t=$("#feed_tabs li:first"),i,r;t!=null&&(t.attr("class","active"),i=t.children(":first"),r=i.data("id"),n.feedTabLink="/f/"+i.data("url"),n.feedId=r,f(r))}),n.load=function(t){var i=angular.element(t.srcElement),r=i.data("id");n.feedTabLink="/f/"+i.data("url"),n.feedId=r,f(r)},n.showNewFeedDialog=function(){$("#feed_create").modal()},n.deleteFeed=function(n){var t=angular.element(n.srcElement);t.removeClass("icon-remove"),t.children().show()},n.confirmDeletion=function(n,t,i){var e=angular.element(n.srcElement),r,f;i?(r={feedId:t},f=JSON.stringify(r),u.post("/manage/blog/deletefeed",f).success(function(n){n.StatusCode!=200||document.location.reload(!0)})):e.parent().addClass("icon-remove").children().hide()}}return n}(),FeedController=function(){function n(n,t){n.newFeed=function(n){if(n==undefined){alert("feed must exists");return}if(!angular.isDefined(n.description)){alert("description is required");return}var i={blogId:angular.element("#feed_blog_id").text(),title:n.title,description:n.description},r=JSON.stringify(i);t.post("/manage/blog/createfeed",r).success(function(n){n.StatusCode!=200||document.location.reload(!0)})}}return n}()