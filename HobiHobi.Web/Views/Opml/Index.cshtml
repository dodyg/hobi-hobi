@{
    Layout = null;
}

<!DOCTYPE html>
<html>
	<head>
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" src="http://static.jstree.com/v.1.0pre/jquery.jstree.js"></script>
		<script type="text/javascript" src="http://static.jstree.com/v.1.0pre/jquery.hotkeys.js"></script>
		<style type="text/css" id="jstree-stylesheet">.jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } #vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }.jstree .jstree-real-checkbox { display:none; } .jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }.jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }</style>
		<link rel="stylesheet" type="text/css" media="all" href="http://static.jstree.com/v.1.0pre/themes/default/style.css">
		<style type="text/css" id="jstree-types-stylesheet">.jstree-5 a > .jstree-icon {  background-image:url(/static/v.1.0pre/_demo/file.png);  background-position:0 0; } .jstree-5 li[rel="folder"] > a > .jstree-icon {  background-image:url(/static/v.1.0pre/_demo/folder.png);  background-position:0 0; } .jstree-5 li[rel="drive"] > a > .jstree-icon {  background-image:url(/static/v.1.0pre/_demo/root.png);  background-position:0 0; } </style>
	<style>
		.type-rss { background-color: orange !important; }
		.type-blog { background-color: grey !important; }
		.type-river { background-color: blue !important; }
		.type-opml { background-color: silver !important; }
	</style>
	</head>
	<body>
		<div id="demo1" class="demo">
		</div>
		<input type="button" value="generate" onclick="saveJson()" />
	</body>
	<script type="text/javascript">
		$(function () {
			$('#demo1').jstree({
				json_data: {
					data: [
						{
							data: "Furniture"
						}
					]
				},
				plugins: ["themes", "json_data", "ui", "crrm", "hotkeys", "dnd", "contextmenu"],
				hotkeys: {
					tab: function() {
						var selected = $.jstree._focused().get_selected();
						var prev = $(selected).prev();
						if(prev == null || prev == undefined)
							return false;
						$.jstree._focused().move_node($(selected), $(prev), 'last');
						return false;
						
					},
					'shift+tab': function() {
						var selected = $.jstree._focused().get_selected();
						if($(selected).parents('ul').length < 2)
							return false;
						$.jstree._focused().move_node($(selected), $(selected).parent().parent(), 'after');
						return false;
					},
					del: function() {
						if(confirm("Are you sure?"))
							this.remove();
					},
					'return': function() {
						$.jstree._focused().create(null, "after", {data:"Edit Here!!"}, null, false);
						//alert('ba');
					}
				},
				themes: {
					theme: "default",
					dots: false,
					icons: false
				},
				contextmenu: {
					select_node: true,
					items: function($node) {
						return {
							rss: {
								label: "RSS",
								action: function(obj) {
									var val = window.prompt("URL", "http://");
									if (val != null)
										$(obj).attr({type: 'rss', url: val}).addClass('type-rss');
								}
							},
							blogpost: {
								label: "Blog Post",
								action: function(obj) {
									var val = window.prompt("URL", "http://");
									if (val != null)
										$(obj).attr({type: 'blogpost', url: val}).addClass('type-blog');
								}
							},
							river: {
								label: "River",
								action: function(obj) {
									var val = window.prompt("URL", "http://");
									if (val != null)
										$(obj).attr({type: 'river', url: val}).addClass('type-river');
								}
							},
							include: {
								label: "River",
								action: function(obj) {
									var val = window.prompt("URL", "http://");
									if (val != null)
										$(obj).attr({type: 'include', url: val}).addClass('type-opml');
								}
							}
						}
					}
				}
			}).bind('create.jstree', function(event, data) {
				$.jstree._focused().select_node($(data.rslt.obj), true);
				$.jstree._focused().rename(data.rslt.obj);
			}).bind('rename.jstree', function(event, data) {
				$.jstree._focused().hover_node($(data.rslt.obj));
			}).bind('hover_node.jstree', function (event, data) {
				$.jstree._focused().select_node($(data.rslt.obj), true);
			});
		});
		function saveJson() {
			var obj = JSON.stringify($.jstree._focused().get_json(-1, ['type', 'url']));
			alert(obj);
		}
	</script>
</html>